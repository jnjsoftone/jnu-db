"use strict";var e;Object.defineProperty(exports,"__esModule",{value:!0}),!function(e,t){for(var r in t)Object.defineProperty(e,r,{enumerable:!0,get:t[r]})}(exports,{backup:function(){return n},connect:function(){return a},disconnect:function(){return c},executeQuery:function(){return s},executeTransaction:function(){return o},restore:function(){return i}});const t=(e=require("pocketbase"))&&e.__esModule?e:{default:e},r=require("jnu-abc"),a=async e=>{try{let r=new t.default(e.url);return e.email&&e.password&&await r.admins.authWithPassword(e.email,e.password),r}catch(e){return console.error("PocketBase 연결 오류:",e),null}},c=async e=>{try{e.authStore.clear()}catch(e){console.error("PocketBase 연결 해제 오류:",e)}},s=async(e,t,r={})=>{try{let a=await e.collection(t).getList(1,50,r);return{success:!0,data:a.items}}catch(e){return{success:!1,error:e instanceof Error?e.message:"알 수 없는 오류"}}},o=async(e,t)=>{try{let r=[];for(let a of t){let t;let c=e.collection(a.collection);switch(a.operation){case"create":t=await c.create(a.data);break;case"update":if(!a.id)throw Error("ID가 필요합니다");t=await c.update(a.id,a.data);break;case"delete":if(!a.id)throw Error("ID가 필요합니다");t=await c.delete(a.id)}t&&r.push(t)}return{success:!0,data:r}}catch(e){return{success:!1,error:e instanceof Error?e.message:"알 수 없는 오류"}}},n=async(e,t)=>{try{let a=await e.collections.getList(1,50),c={};for(let t of a.items){let r=await e.collection(t.id).getList(1,50);c[t.id]=r.items}return await (0,r.saveJson)(t,c),{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"알 수 없는 오류"}}},i=async(e,t)=>{try{let a=await (0,r.loadJson)(t);for(let[t,r]of Object.entries(a))if(Array.isArray(r)&&r.length>0){let a=e.collection(t);for(let e of r)await a.create(e)}return{success:!0}}catch(e){return{success:!1,error:e instanceof Error?e.message:"알 수 없는 오류"}}};